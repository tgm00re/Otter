{"ast":null,"code":"import _asyncToGenerator from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TweetForm(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messageError=_useState4[0],setMessageError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),imageError=_useState6[0],setImageError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),imageUrl=_useState8[0],setImageUrl=_useState8[1];function handleSubmit(e){e.preventDefault();if(message.length!==0){var post={message:message,imageUrl:imageUrl};axios.post(\"http://localhost:8080/api/posts/create/\"+props.loggedInUser.userId,post).then(function(response){var newPosts=_toConsumableArray(props.posts);newPosts.push(response.data);props.setPosts(newPosts);setMessage(\"\");setMessageError(\"\");setImageUrl(\"\");}).catch(function(error){return console.log(error.response);});}else{setMessageError(\"Your anotter message cannot be blank!\");}}var convertBase64=function convertBase64(file){return new Promise(function(resolve,reject){var fileReader=new FileReader();fileReader.readAsDataURL(file);fileReader.onload=function(){resolve(fileReader.result);};fileReader.onerror=function(error){reject(error);setImageError(\"File is too large!\");};});};var uploadImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,base64;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];_context.next=3;return convertBase64(file);case 3:base64=_context.sent;setImageUrl(base64);case 5:case\"end\":return _context.stop();}}},_callee);}));return function uploadImage(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"tweet-form\",className:\"pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-1 mt-2 d-flex align-items-start\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"w-100 mx-3\",onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile-img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:props.loggedInUser.profileImageUrl,alt:\"\",className:\"rounded-circle profile-img\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's happening?\",className:\"w-100 bg-transparent border-0\",rows:\"3\",id:\"tweet-form-input\",maxLength:\"200\",value:message,onInput:function onInput(e){setMessage(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center w-100 mb-3\",children:imageUrl!=\"\"?/*#__PURE__*/_jsx(\"img\",{className:\"rounded post-img\",src:imageUrl}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[imageUrl!=\"\"?/*#__PURE__*/_jsx(\"label\",{className:\"btn  border-danger text-start mx-2 px-1\",style:{fontWeight:\"bold\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",onClick:function onClick(){return setImageUrl(\"\");},children:\"Remove Image\"})}):null,/*#__PURE__*/_jsxs(\"label\",{className:\"btn text-light border text-start mx-4 px-1\",style:{fontWeight:\"bold\"},children:[\"Upload Image\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control bg-transparent border-0\",accept:\"image/*\",onChange:function onChange(e){return uploadImage(e);},hidden:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary rounded-pill p-2\",id:\"tweet-submit\",children:\"Anotter\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-danger bg-transparent\",style:{fontWeight:\"bold\"},children:messageError})})]})})});}","map":{"version":3,"sources":["/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/src/Components/TweetForm.jsx"],"names":["axios","React","useState","TweetForm","props","message","setMessage","messageError","setMessageError","imageError","setImageError","imageUrl","setImageUrl","handleSubmit","e","preventDefault","length","post","loggedInUser","userId","then","response","newPosts","posts","push","data","setPosts","catch","error","console","log","convertBase64","file","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","uploadImage","target","files","base64","profileImageUrl","value","fontWeight"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react'\n\nexport default function TweetForm(props) {\n    const [message, setMessage] = useState(\"\");\n    const [messageError, setMessageError] = useState(\"\");\n    const [imageError, setImageError] = useState(\"\");\n    const [imageUrl, setImageUrl] = useState(\"\");\n\n    function handleSubmit(e){\n        e.preventDefault();\n\n        if(message.length !== 0){\n            const post={\n                message: message,\n                imageUrl: imageUrl\n            }\n\n                axios.post(\"http://localhost:8080/api/posts/create/\" + props.loggedInUser.userId, post)\n                .then(response => {\n                    let newPosts = [...props.posts];\n                    newPosts.push(response.data);\n                    props.setPosts(newPosts);\n                    setMessage(\"\");\n                    setMessageError(\"\");\n                    setImageUrl(\"\");\n                })\n                .catch(error => console.log(error.response))\n            } else {\n            setMessageError(\"Your anotter message cannot be blank!\");\n        }        \n    }\n\n\n    const convertBase64 = (file) => {\n        return new Promise((resolve, reject) => {\n            const fileReader = new FileReader();\n            fileReader.readAsDataURL(file);\n\n            fileReader.onload = (() => {\n                resolve(fileReader.result)\n            });\n\n            fileReader.onerror = ((error) => {\n                reject(error);\n                setImageError(\"File is too large!\")\n            })\n\n        })\n    }\n\n    const uploadImage = async (e) => {\n        const file = e.target.files[0];\n        const base64 = await convertBase64(file);\n        setImageUrl(base64);\n    }\n\n\n    return (\n        <div id=\"tweet-form\" className=\"pb-2\">\n            <div className=\"px-1 mt-2 d-flex align-items-start\">\n                <form className=\"w-100 mx-3\" onSubmit={e => handleSubmit(e)}>\n                    <p className=\"profile-img-container\">\n                        <img src={props.loggedInUser.profileImageUrl} alt=\"\" className=\"rounded-circle profile-img\"/>\n                    </p>\n                    <div className=\"text-end\">\n                        <textarea placeholder=\"What's happening?\" className=\"w-100 bg-transparent border-0\" rows=\"3\" id=\"tweet-form-input\" maxLength=\"200\" value={message} onInput={e => {\n                            setMessage(e.target.value);\n                        }}/>\n                    </div>\n                    <div className=\"text-center w-100 mb-3\">\n                        {imageUrl != \"\" ?\n                            <img className=\"rounded post-img\" src={imageUrl}/>\n                        :\n                        null}\n                    </div>\n                    \n                    <div className=\"text-end\">\n                    { imageUrl != \"\" ?\n                        <label className=\"btn  border-danger text-start mx-2 px-1\" style={{fontWeight:\"bold\"}}>\n                            <span className=\"text-danger\" onClick={() => setImageUrl(\"\")}>Remove Image</span>\n                        </label> \n                        :\n                        null\n                    }\n                    \n                        <label className=\"btn text-light border text-start mx-4 px-1\" style={{fontWeight:\"bold\"}}>\n                            Upload Image\n                            <input type=\"file\" className=\"form-control bg-transparent border-0\" accept=\"image/*\" onChange={e => uploadImage(e)} hidden/>\n                        </label>  \n                        <button type=\"submit\" className=\"btn btn-primary rounded-pill p-2\" id=\"tweet-submit\">Anotter</button>    \n                    </div>\n                    <div className=\"text-end\">\n                    <p className=\"text-danger bg-transparent\" style={{fontWeight:\"bold\"}}>{messageError}</p>\n\n                    </div>\n                    \n                </form>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}