{"ast":null,"code":"import _toConsumableArray from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useEffect}from'react';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NotificationsMiddle(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notifications=_useState2[0],setNotifications=_useState2[1];useEffect(function(){console.log(\"Running\");var link=\"http://localhost:8080/api/notifications/find/received/\"+sessionStorage.getItem(\"user_id\");console.log(\"Link: \",link);axios.get(link).then(function(response){return setNotifications(response.data);}).catch(function(err){return console.log(err);});},[]);function deleteNotification(notification,index){axios.delete(\"http://localhost:8080/api/notifications/delete/\"+notification.id).then(function(response){return console.log(response);}).catch(function(err){return console.log(err);});}function deleteNotificationFromArray(index){var newNotifArr=_toConsumableArray(notifications);newNotifArr.splice(index,1);setNotifications(newNotifArr);}function handleAccept(notification,index){//Create a friendship between the two ids\nvar addFriendship={firstUserId:notification.recipientId,secondUserId:notification.senderId};axios.post(\"http://localhost:8080/api/friendships/create\",addFriendship).then(function(response){console.log(response);}).catch(function(error){return console.log(error);});//Delete the notifcation\ndeleteNotification(notification);//Remove notification from notification array\ndeleteNotificationFromArray(index);}function handleDecline(notification,index){//Delete the notification\ndeleteNotification(notification);deleteNotificationFromArray(index);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-start ps-2\",children:[\"Notifications - \",notifications.length]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"ul\",{className:\"text-start ps-0\",style:{listStyle:\"none\"},children:notifications.map(function(item,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"h5 d-flex p-0 m-0 justify-content-around align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.senderName,\" sent you a friend request!\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-transparent border-3 border-success rounded-pill text-success me-3\",id:\"friend-accept-btn\",onClick:function onClick(){return handleAccept(item,index);},children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn rounded-pill border-danger border-3 border-danger text-danger btn-transparent\",id:\"friend-decline-btn\",onClick:function onClick(){return handleDecline(item,index);},children:\"Decline\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{})]});})})]});}","map":{"version":3,"sources":["/Users/thomasmoore/Documents/Personal Projects/Otter/src/main/myapp/src/Components/NotificationsMiddle.jsx"],"names":["React","useState","useEffect","axios","NotificationsMiddle","notifications","setNotifications","console","log","link","sessionStorage","getItem","get","then","response","data","catch","err","deleteNotification","notification","index","delete","id","deleteNotificationFromArray","newNotifArr","splice","handleAccept","addFriendship","firstUserId","recipientId","secondUserId","senderId","post","error","handleDecline","length","listStyle","map","item","senderName"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function NotificationsMiddle() {\n    const [notifications, setNotifications] = useState([]);\n\n    useEffect(() => {\n        console.log(\"Running\");\n        const link = \"http://localhost:8080/api/notifications/find/received/\" + sessionStorage.getItem(\"user_id\");\n        console.log(\"Link: \", link)\n        axios.get(link)\n            .then(response => setNotifications(response.data))\n            .catch(err => console.log(err));\n    }, [])\n\n    function deleteNotification(notification, index){\n        axios.delete(\"http://localhost:8080/api/notifications/delete/\" + notification.id)\n            .then(response => console.log(response))\n            .catch(err => console.log(err))\n    }\n\n    function deleteNotificationFromArray(index){\n        let newNotifArr = [...notifications];\n        newNotifArr.splice(index, 1);\n        setNotifications(newNotifArr);\n    }\n\n    function handleAccept(notification, index){\n        //Create a friendship between the two ids\n        const addFriendship = {\n            firstUserId: notification.recipientId,\n            secondUserId: notification.senderId\n        }\n        axios.post(\"http://localhost:8080/api/friendships/create\", addFriendship)\n            .then(response => {\n                console.log(response)\n            })\n            .catch(error => console.log(error));\n        //Delete the notifcation\n        deleteNotification(notification);\n        //Remove notification from notification array\n        deleteNotificationFromArray(index);\n    }\n\n    function handleDecline(notification, index){\n        //Delete the notification\n        deleteNotification(notification);\n        deleteNotificationFromArray(index);\n    }\n\n\n\n\n\n    return (\n        <>\n            <h1 className=\"text-start ps-2\">Notifications - {notifications.length}</h1>\n            <hr />\n            <ul className=\"text-start ps-0\" style={{listStyle: \"none\"}}>\n                {\n                    notifications.map((item, index) => {\n                        return (\n                            <>\n                            <li className=\"h5 d-flex p-0 m-0 justify-content-around align-items-center\">\n                                <span>\n                                    {item.senderName} sent you a friend request!\n                                </span>\n                                <div>\n                                    <button className=\"btn btn-transparent border-3 border-success rounded-pill text-success me-3\" id=\"friend-accept-btn\" onClick={() => handleAccept(item, index)}>Accept</button>\n                                    <button className=\"btn rounded-pill border-danger border-3 border-danger text-danger btn-transparent\" id=\"friend-decline-btn\" onClick={() => handleDecline(item, index)}>Decline</button>\n                                </div>\n                            </li>\n                            <hr />\n                            </>\n                        )\n                    })\n                }\n            </ul>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}